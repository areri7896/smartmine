{% extends 'src/dashboard/basic.html' %} {% load static %}
{% load socialaccount %}

<title>{%block title %}update profile{% endblock %}</title>
{%block css_links %}
<link href="{% static 'assets/media/images/icons/logo.svg' %}" rel="shortcut icon" type="image/x-icon" />

<!-- Start::Global Styles (used by all pages) -->
<link href="{% static 'assets/css/styles.bundle.css' %}" rel="stylesheet" type="text/css" />
<!-- End::Global Styles -->
<!-- Start::Plugins (used by this page) -->
<link href="{% static 'assets/plugins/datepicker/css/bootstrap-datepicker.min.css' %}" rel="stylesheet"
  type="text/css" />
<!-- End::Plugins -->
<!-- Start::Page Styles (used by this page) -->
<link href="{% static 'assets/css/pages/profile-v1.css' %}" rel="stylesheet" type="text/css" />
<!-- End::Page Styles -->
{% endblock %}

<body class="">
  {% block content %}

  <div class="profile profile-v1">
    <div class="container container--dashboard">
      <div class="profile__title">
        <div class="profile__title-icon-wrapper">
          {% if user.is_authenticated %}
          <img src="{{ user.profile.profile_pic.url }}" alt="" class="profile__title-icon" />
        </div>
        {% endif %}
        <div class="profile__title-text">
          <h3 class="profile__title-text-1">Update your Profile</h3>
          <p class="fd-md profile__title-text-2">Setup your profile</p>
        </div>
      </div>

      <div class="profile__container">
        <div class="profile__content">
          <div class="profile__contact-info">
            <div class="contact-info__photo-profile">
              {% if user.is_authenticated %}
              <div class="photo-profile__group">
                <img src="{{ user.profile.profile_pic.url }}" alt="" class="photo-profile__group-photo" />
                <div class="photo-profile__group-text"
                  style="display: flex; justify-content: space-between; gap: 10px; text-transform: uppercase;">
                  <p class="fd-sm fd-sm--bold photo-profile__group-text-name" style="margin: auto;">
                    {{ user.profile.first_name }}
                  </p>
                  <p class="fd-sm fd-sm--bold photo-profile__group-text-name">
                    {{ user.profile.last_name }}
                  </p>
                </div>
              </div>
              <p class="fb-sm photo-profile__group-text-email">
                {{ user.email }}
              </p>
              <!-- <div class="photo-profile__cta">
                <button class="btn btn-primary btn-sm btn-pill">
                  Change Photo Profile
                </button>
                <button class="btn btn-secondary btn-sm">Delete</button>
              </div> -->
              {% endif %}
            </div>
            <form action="" enctype="multipart/form-data" method="POST" class="contact-info__form"
              url="{% url 'profile' %}">
              {%csrf_token%}

              <div class="contact-info__name w-100">
                <div class="contact-info__name-form">
                  <div class="personal-info__name-form personal-info__name-form--country" style="width: 90%;">
                    <p class="fb-regular fb-regular--bold contact-info__name-form-text">
                      {{ user_form.username.label }}
                    </p>
                    <div class="d-block mini-form-sm__box contact-info__name-form-input w-100">
                      {{ user_form.username }}
                    </div>
                  </div>
                  <div class="personal-info__name-form personal-info__name-form--country">
                    <p class="fb-regular fb-regular--bold personal-info__name-form-text w-100">
                      {{ user_form.profile_pic.label }}:
                    </p>
                    <div class="d-block mini-form-sm__box contact-info__name-form-input w-100">
                      {{ user_form.profile_pic }}
                    </div>
                  </div>
                </div>
                <!-- <div class="contact-info__name-form">
                <p class="fb-regular fb-regular--bold contact-info__name-form-text">
                  {{user_form.email.label}}
                </p>
                <div class="d-block mini-form-sm__box contact-info__name-form-input">
                  {{ user_form.email }}
                </div>
              </div> -->
              </div>
          </div>
        </div>
        <div class="profile__personal-info"
          style="display: flex; justify-content: space-between; margin: 20px 0; gap: 10px;">
          <div class="personal-info__name-form" style="width: 90%;">
            <p class="fb-regular fb-regular--bold personal-info__name-form-text">
              {{user_form.first_name.label}}
            </p>
            <div class="d-block mini-form-sm__box personal-info__name-form-input">

              {{ user_form.first_name }}
            </div>
          </div>
          <div class="personal-info__name-form" style="width: 90%;">
            <p class="fb-regular fb-regular--bold personal-info__name-form-text">
              {{ user_form.last_name.label }}
            </p>
            <div class="d-block mini-form-sm__box personal-info__name-form-input">
              {{ user_form.last_name }}
            </div>
          </div>
        </div>
        <div class="" style="display: flex; justify-content: space-between; gap: 10px;">
          <div class="personal-info__name-form personal-info__name-form--date w-100">
            <p class="fb-regular fb-regular--bold personal-info__name-form-text">
              {{ user_form.dob.label }}
            </p>
            <div class="d-block mini-form-sm__box personal-info__name-form-input">
              {{ user_form.dob }}
            </div>
          </div>
          <div class="personal-info__name-form personal-info__name-form--country w-100">
            <p class="fb-regular fb-regular--bold personal-info__name-form-text">
              {{ user_form.country.label }}
            </p>
            <div class="d-block mini-form-sm__box contact-info__name-form-input">
              {{ user_form.country }}
            </div>
          </div>

          <button class="btn btn-primary btn-lg btn-pill profile__save-btn " >
            Save Changes
          </button>
        </div>
      </div>
      <div>
      </div>
    </div>
    </form>
  </div>
  </div>
  {% if messages %}
  <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
    <div id="liveToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="toast-header " style="background-color: #27f7db;">
        <strong class="me-auto">Alert</strong>
        <small class="text-muted">Just now</small>
        <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
      <div class="toast-body" style="background-color: #246CF9;" id="toastMessage">
        {% for message in messages %} {{ message }} {% endfor %}
      </div>
    </div>
  </div>

  <script>
    window.addEventListener("DOMContentLoaded", () => {
      const toastEl = document.getElementById("liveToast");
      const toast = new bootstrap.Toast(toastEl);
      toast.show();
    });
  </script>
  {% endif %} {%block js %}
  <!-- Start::Global Bundle Scripts (used by all pages) -->
  <script src="{% static 'assets/js/scripts.bundle.js' %}"></script>
  <script src="{% static 'assets/js/custom/sidebar.js' %}"></script>
  <!-- End::Global Bundle Scripts -->
  <!-- Start::Plugins (used by this page) -->
  <script src="{% static 'assets/plugins/datepicker/js/bootstrap-datepicker.min.js' %}"></script>
  <!-- End::Plugins -->
  <!-- Start::Page Scripts (used by this page) -->
  <script src="{% static 'assets/js/custom/navbar.js' %}"></script>
  <script src="{% static 'assets/js/custom/custom-select.js' %}"></script>
  <!-- Bootstrap JS (place before closing </body>) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script src="{% static 'assets/js/custom/datepicker.js' %}"></script>
  <!-- End::Page Scripts -->
  {% endblock %} {% endblock %}
</body>