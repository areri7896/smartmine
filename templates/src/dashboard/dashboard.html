{%extends 'src/dashboard/basic.html' %}
{% load static %}

<title>{% block title %} Dashboard | SmartMine Landing Page & Dashboard {% endblock %} </title>

{% block csx %}
{% endblock %}

{% block css_links %}
<link href="{% static 'assets/media/images/icons/logo.svg' %}" rel="shortcut icon" type="image/x-icon" />
<!-- Start::Global Styles (used by all pages) -->
<link href="{% static 'assets/css/styles.bundle.css' %}" rel="stylesheet" type="text/css" />
<!-- End::Global Styles -->
<!-- Start::Plugins (used by this page) -->
<link href="{% static 'assets/plugins/apexcharts/apexcharts.css' %}" rel="stylesheet" type="text/css" />
<!-- End::Plugins -->
<!-- Start::Page Styles (used by this page) -->
<link href="{% static 'assets/css/pages/dashboard-v1.css' %}" rel="stylesheet" type="text/css" />
<!-- End::Page Styles -->

{% endblock %}
{% block content %}

<body class="">

  <div class="dashboard dashboard--v1">
    <div class="container container--dashboard">
      <div class="dashboard__group">
        <!-- Section::Balance Section -->
        <!-- Start::Complete Card -->
        <div class="complete-card complete-card--type-1-v1">
          <div class="complete-card__balance">
            <div class="complete-card__balance-head">
              <div class="complete-card__balance-head__title">
                <h6 class="complete-card__balance-head__title-text">Balance</h6>
                <div class="complete-card__balance-head__title-influsion">
                  <img src="../assets/media/images/icons/arrow-bullish.svg" alt=""
                    class="complete-card__balance-head__title-influsion-icon">
                  <p
                    class="fb-regular fb-regular--bold complete-card__balance-head__title-influsion-value text-bullish">
                    2.36%</p>
                </div>
              </div>
              <p class="complete-card__balance-head__value">USD 12.243,55</p>
            </div>
            <div class="complete-card__balance-revenue">
              <div class="complete-card__balance-revenue__income">
                <div class="balance-revenue__income-title">
                  <img src="../assets/media/images/icons/arrow-bullish.svg" alt=""
                    class="balance-revenue__income-title-icon">
                  <p class="fb-regular balance-revenue__income-title-text">Income</p>
                </div>
                <p class="fd-sm fd-sm--bold balance-revenue__income-value">USD 12.243,55</p>
              </div>
              <div class="complete-card__balance-revenue__separator"></div>
              <div class="complete-card__balance-revenue__expenses">
                <div class="balance-revenue__expenses-title">
                  <img src="../assets/media/images/icons/arrow-bearish.svg" alt=""
                    class="balance-revenue__expenses-title-icon">
                  <p class="fb-regular balance-revenue__expenses-title-text">Expenses</p>
                </div>
                <p class="fd-sm fd-sm--bold balance-revenue__expenses-value">USD 3.132,23</p>
              </div>
            </div>
          </div>
          <div class="complete-card__separator"></div>
          <div class="complete-card__wallet">
            <div class="complete-card__wallet-head">
              <h6 class="complete-card__wallet-head__title-text">Wallet</h6>
              <p class="fb-regular complete-card__wallet-head__title-total-currencies">3 Currencies</p>
            </div>
            <div class="complete-card__wallet-data">
              <div class="complete-card__wallet-data__chart">
                <div id="complete-card__wallet-data__donut-chart-1"
                  class="complete-card__wallet-data__donut-chart-render"></div>
                <div class="complete-card__wallet-data__donut-chart-label">
                  <img src="../assets/media/images/icons/arrow-bullish.svg" alt=""
                    class="complete-card__wallet-data__donut-chart-label-icon"></img>
                  <p class="fd-sm fd-sm--bold complete-card__wallet-data__donut-chart-label-text">2.31%</p>
                </div>
              </div>
              <div class="complete-card__wallet-data__currencies">
                <div class="wallet-data__currency">
                  <img src="../assets/media/images/icons/logo-btc.svg" alt="" class="wallet-data__currency-icon">
                  <div class="wallet-data__currency-text">
                    <p class="fb-regular fb-regular--bold wallet-data__currency-text-acronym">BTC</p>
                    <p class="fb-regular wallet-data__currency-text-name">Bitcoin</p>
                  </div>
                  <div class="wallet-data__currency-influsion">
                    <img src="../assets/media/images/icons/arrow-bullish.svg" alt=""
                      class="wallet-data__currency-influsion-icon">
                    <p class="fb-sm wallet-data__currency-influsion-value">2.36%</p>
                  </div>
                </div>
                <div class="wallet-data__currency">
                  <img src="../assets/media/images/icons/logo-eth.svg" alt="" class="wallet-data__currency-icon">
                  <div class="wallet-data__currency-text">
                    <p class="fb-regular fb-regular--bold wallet-data__currency-text-acronym">ETH</p>
                    <p class="fb-regular wallet-data__currency-text-name">Ethereum</p>
                  </div>
                  <div class="wallet-data__currency-influsion">
                    <img src="../assets/media/images/icons/arrow-bullish.svg" alt=""
                      class="wallet-data__currency-influsion-icon">
                    <p class="fb-sm wallet-data__currency-influsion-value">1.80%</p>
                  </div>
                </div>
                <div class="wallet-data__currency">
                  <img src="../assets/media/images/icons/logo-usdt.svg" alt="" class="wallet-data__currency-icon">
                  <div class="wallet-data__currency-text">
                    <p class="fb-regular fb-regular--bold wallet-data__currency-text-acronym">USDT</p>
                    <p class="fb-regular wallet-data__currency-text-name">Tether</p>
                  </div>
                  <div class="wallet-data__currency-influsion">
                    <img src="../assets/media/images/icons/arrow-bullish.svg" alt=""
                      class="wallet-data__currency-influsion-icon">
                    <p class="fb-sm wallet-data__currency-influsion-value">1.64%</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- End::Complete Card -->

        <!-- Section::Transaction Section -->
        <!-- Start::Standard Card -->
        <div class="standard-card standard-card--type-5-v2">
          <div class="container">
            <div class="standard-card__head">
              <h6 class="standard-card__title">Transaction</h6>
              <div class="dropdown">
                <button class="btn btn-secondary dropdown-toggle dropdown-toggle--card-type-5" type="button"
                  id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                  All
                  <img src="../assets/media/images/icons/arrow-down.svg" alt="">
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                  <li><a class="dropdown-item" href="#">Action</a></li>
                  <li><a class="dropdown-item" href="#">Another action</a></li>
                  <li><a class="dropdown-item" href="#">Something else here</a></li>
                </ul>
              </div>
            </div>
            <div class="standard-card__content">
              <div class="standard-card__content__list">
                <div class="standard-card__content__list-currency">
                  <img src="../assets/media/images/icons/Bitcoin.svg" alt=""
                    class="standard-card__content__list-currency-icon">
                  <p class="standard-card__content__list-currency-name">BTC</p>
                </div>
                <div class="standard-card__content__list-status">
                  <p class="standard-card__content__list-status-name">Receive</p>
                  <img src="../assets/media/images/icons/transaction-arrow-green.svg" alt=""
                    class="standard-card__content__list-status-icon">
                </div>
                <div class="standard-card__content__list-price">
                  <p class="standard-card__content__list-price-value">$0.143,21</p>
                </div>
              </div>
              <div class="standard-card__content__list">
                <div class="standard-card__content__list-currency">
                  <img src="../assets/media/images/icons/Bitcoin.svg" alt=""
                    class="standard-card__content__list-currency-icon">
                  <p class="standard-card__content__list-currency-name">BTC</p>
                </div>
                <div class="standard-card__content__list-status">
                  <p class="standard-card__content__list-status-name">Receive</p>
                  <img src="../assets/media/images/icons/transaction-arrow-green.svg" alt=""
                    class="standard-card__content__list-status-icon">
                </div>
                <div class="standard-card__content__list-price">
                  <p class="standard-card__content__list-price-value">$0.143,21</p>
                </div>
              </div>
              <div class="standard-card__content__list">
                <div class="standard-card__content__list-currency">
                  <img src="../assets/media/images/icons/ETH.svg" alt=""
                    class="standard-card__content__list-currency-icon">
                  <p class="standard-card__content__list-currency-name">ETH</p>
                </div>
                <div class="standard-card__content__list-status">
                  <p class="standard-card__content__list-status-name">Send</p>
                  <img src="../assets/media/images/icons/transaction-arrow-red.svg" alt=""
                    class="standard-card__content__list-status-icon">
                </div>
                <div class="standard-card__content__list-price">
                  <p class="standard-card__content__list-price-value">$0.34,223</p>
                </div>
              </div>
              <div class="standard-card__content__list">
                <div class="standard-card__content__list-currency">
                  <img src="../assets/media/images/icons/Bitcoin.svg" alt=""
                    class="standard-card__content__list-currency-icon">
                  <p class="standard-card__content__list-currency-name">BTC</p>
                </div>
                <div class="standard-card__content__list-status">
                  <p class="standard-card__content__list-status-name">Receive</p>
                  <img src="../assets/media/images/icons/transaction-arrow-green.svg" alt=""
                    class="standard-card__content__list-status-icon">
                </div>
                <div class="standard-card__content__list-price">
                  <p class="standard-card__content__list-price-value">$0.143,21</p>
                </div>
              </div>
              <div class="standard-card__content__list">
                <div class="standard-card__content__list-currency">
                  <img src="../assets/media/images/icons/Bitcoin.svg" alt=""
                    class="standard-card__content__list-currency-icon">
                  <p class="standard-card__content__list-currency-name">BTC</p>
                </div>
                <div class="standard-card__content__list-status">
                  <p class="standard-card__content__list-status-name">Receive</p>
                  <img src="../assets/media/images/icons/transaction-arrow-green.svg" alt=""
                    class="standard-card__content__list-status-icon">
                </div>
                <div class="standard-card__content__list-price">
                  <p class="standard-card__content__list-price-value">$0.143,21</p>
                </div>
              </div>
              <div class="standard-card__content__list">
                <div class="standard-card__content__list-currency">
                  <img src="../assets/media/images/icons/Bitcoin.svg" alt=""
                    class="standard-card__content__list-currency-icon">
                  <p class="standard-card__content__list-currency-name">BTC</p>
                </div>
                <div class="standard-card__content__list-status">
                  <p class="standard-card__content__list-status-name">Receive</p>
                  <img src="../assets/media/images/icons/transaction-arrow-green.svg" alt=""
                    class="standard-card__content__list-status-icon">
                </div>
                <div class="standard-card__content__list-price">
                  <p class="standard-card__content__list-price-value">$0.143,21</p>
                </div>
              </div>
              <div class="standard-card__content__list">
                <div class="standard-card__content__list-currency">
                  <img src="../assets/media/images/icons/ETH.svg" alt=""
                    class="standard-card__content__list-currency-icon">
                  <p class="standard-card__content__list-currency-name">ETH</p>
                </div>
                <div class="standard-card__content__list-status">
                  <p class="standard-card__content__list-status-name">Send</p>
                  <img src="../assets/media/images/icons/transaction-arrow-red.svg" alt=""
                    class="standard-card__content__list-status-icon">
                </div>
                <div class="standard-card__content__list-price">
                  <p class="standard-card__content__list-price-value">$0.34,223</p>
                </div>
              </div>
              <div class="standard-card__content__list">
                <div class="standard-card__content__list-currency">
                  <img src="../assets/media/images/icons/Bitcoin.svg" alt=""
                    class="standard-card__content__list-currency-icon">
                  <p class="standard-card__content__list-currency-name">BTC</p>
                </div>
                <div class="standard-card__content__list-status">
                  <p class="standard-card__content__list-status-name">Receive</p>
                  <img src="../assets/media/images/icons/transaction-arrow-green.svg" alt=""
                    class="standard-card__content__list-status-icon">
                </div>
                <div class="standard-card__content__list-price">
                  <p class="standard-card__content__list-price-value">$0.143,21</p>
                </div>
              </div>
              <div class="standard-card__content__list">
                <div class="standard-card__content__list-currency">
                  <img src="../assets/media/images/icons/Bitcoin.svg" alt=""
                    class="standard-card__content__list-currency-icon">
                  <p class="standard-card__content__list-currency-name">BTC</p>
                </div>
                <div class="standard-card__content__list-status">
                  <p class="standard-card__content__list-status-name">Receive</p>
                  <img src="../assets/media/images/icons/transaction-arrow-green.svg" alt=""
                    class="standard-card__content__list-status-icon">
                </div>
                <div class="standard-card__content__list-price">
                  <p class="standard-card__content__list-price-value">$0.143,21</p>
                </div>
              </div>
            </div>
            <div class="standard-card__vignette"></div>
          </div>
        </div>
        <!-- End::Standard Card -->

        <!-- Section::Assets Carousel Section -->
        <div class="assets">
          <div class="assets__carousel">
            {% for token in tokens %}
            <div class="standard-card standard-card--type-3-v1 assets__item">
              <div class="container">
                <div class="standard-card__content">
                  <div class="standard-card__content-graph">
                    <img src="{{ token.logo }}" alt="{{ token.logo }}" class="standard-card__content-image">
                    <div class="standard-card__content-chart-wrapper">
                      <div id="standard-card__content-chart-3" class="standard-card__content-chart-render"></div>
                    </div>
                  </div>
                  <div class="standard-card__content-percentage">
                    <img class="standard-card__content-arrow"
                      src="{% static 'assets/media/images/icons/green-arrow-up.svg' %}" alt="">
                    <p class="standard-card__content-value text-bullish">2.11%</p>
                  </div>
                  <div class="standard-card__content-desc">
                    <p class="standard-card__content-desc-currency">{{ token.symbol }}</p>
                    <div class="standard-card__content-desc-prices">
                      <p class="standard-card__content-desc-price">{{ token.price }} USD</p>
                      <p class="standard-card__content-desc-token">{{ token.symbol }}</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
          <!-- pagination -->
          <div class="slick__pagination">
            <div class="assets-carousel__arrows">
              <a href="#" class="assets-carousel__prev">
                <img src="{% static 'assets/media/images/icons/light-circle-arrow-left.svg'}" alt="Previous">
              </a>
              <a href="#" class="assets-carousel__next">
                <img src="{% static 'assets/media/images/icons/light-circle-arrow-right.svg'}" alt="Next">
              </a>
            </div>
            <div class="assets-carousel__pagination slick__pagination--dots">
              <div class="assets-carousel__slick-slider-dots slick-slider-dots"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <!-- <div class="container"> <canvas id="tickerChart" width="800" height="400"></canvas></div> -->


  {% if messages %}
  <div class=" position-fixed bottom-0 end-0 p-3" style="z-index: 11">
                <div id="liveToast" class="toast bg-primary" role="alert" aria-live="assertive" aria-atomic="true">
                  <div class="toast-header">
                    <strong class="me-auto">Alert</strong>
                    <small class="text-muted">Just now</small>
                    <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                  </div>
                  <div class="toast-body bg-primary" id="toastMessage">
                    {% for message in messages %}
                    {{ message }}
                    {% endfor %}
                  </div>
                </div>
            </div>

            <script>
              window.addEventListener('DOMContentLoaded', () => {
                const toastEl = document.getElementById('liveToast');
                const toast = new bootstrap.Toast(toastEl);
                toast.show();
              });
            </script>
            {% endif %}
            <!-- 
  <script>
    async function fetchData() {
      try {
        const response = await fetch('/dashboard/api/tickers/');
        const data = await response.json();
        return data;
      } catch (error) {
        console.error("Error fetching data:", error);
      }
    }

    async function plotChart() {
      const data = await fetchData();
      if (!data) return;

      const labels = data.map(item => item.symbol);
      const prices = data.map(item => parseFloat(item.price));

      const ctx = document.getElementById('tickerChart').getContext('2d');
      new Chart(ctx, {
        type: 'bar',
        data: {
          labels: labels,
          datasets: [{
            label: 'Ticker Prices',
            data: prices,
            backgroundColor: 'rgba(75, 192, 192, 0.2)',
            borderColor: 'rgba(75, 192, 192, 1)',
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          scales: {
            y: {
              beginAtZero: true
            }
          }
        }
      });
    }
    plotChart();
  </script> -->

            {% block js %}
            <!-- Bootstrap JS (place before closing </body>) -->
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
            <!-- Start::Global Bundle Scripts (used by all pages) -->
            <script src="{% static 'assets/js/scripts.bundle.js' %}"></script>
            <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
            <script src="{% static 'assets/js/custom/sidebar.js' %}"></script>
            <!-- End::Global Bundle Scripts -->
            <!-- Start::Plugins (used by this page) -->
            <script src="{% static 'assets/plugins/apexcharts/apexcharts.min.js' %}"></script>
            <script src="{% static 'assets/plugins/slick/slick.min.js' %}"></script>
            <!-- End::Plugins -->
            <!-- Start::Page Scripts (used by this page) -->
            <script src="{% static 'assets/js/custom/chart.js' %}"></script>
            <script src="{% static 'assets/js/pages/dashboard-page-v1.js' %}"></script>
            <script src="{% static 'assets/js/custom/navbar.js' %}"></script>
            <script src="{% static 'assets/js/custom/custom-select.js' %}"></script>
            {% endblock %}
            {% endblock %}
</body>